# Readme

第一次更新时间：2022年3月7日20点57分

作者：冀风光

为了满足Robomaster对弹道精准性的需求，Taurus经常需要指派机械组队员对弹道进行控制变量测试，因此出本套代码以配合机械组队员工作。

## 1 准备

### 1.1 硬件平台：

Stm32F407Vet6

摩擦轮：3508电机（can1）

拨盘：2006电机(can1)

### 1.2 软件平台：

语言：C语言

操作系统：FreeRTOS

## 2  代码架构

CubeMX生成的代码：

手动添加：

## 3 控制逻辑

**发射**：

1. 摩擦轮电机以恒定速度转动，拨动拨盘，子弹进入摩擦轮后被挤出，从而获得初速度后发射。
2. 射速控制
3. 射频控制
4. **PID快速调参**：
5. **使用OLED屏幕显示实时射速**；

**保护**：

左侧拨杆居中，右侧拨杆置于最上方，右侧油门打到右下方片刻后**解锁**；

左侧拨杆打到最上，关闭保护；

左侧拨杆打到中间，开启保护；

**波形显示**：

将调试器串口接入核心板**串口4**后，打开Vofa+后四个通道即为摩擦轮转速；

**I0;I1;**左侧摩擦轮（面向拨盘出口)

**I2;I3;**右侧摩擦轮（面向拨盘出口)

## 4  与队里相对有何改动

由于电机不一定全部为大疆电机或can电机，所以将电机信息结算单独一直到了bsp_motor.c/.h中，方便今后更新代码。



